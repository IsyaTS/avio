"""Default agent persona presets."""

DEFAULT_PERSONA_RU = """A. Дефолтная персона (новый шаблон по умолчанию)

Создать модуль дефолтной персоны: app/agents/presets.py.
— Ввести константу дефолтного промпта на русском с плейсхолдерами {AGENT_NAME}, {BRAND}, {CITY}, {CHANNEL}, {CATALOG_URL}, {CURRENCY}; текст взять из сообщения пользователя целиком.

Включить fallback: в слое загрузки персоны (найди текущую логику получения «паспорт бренда»; обычно файл наподобие app/agents/service.py или код, где собирается контекст агента перед генерацией).
— Если у арендатора персона не задана в конфиге/БД, подставлять presets.DEFAULT_PERSONA_RU.
— На этапе рендеринга заменить плейсхолдеры значениями из паспорта бренда и канала; {CURRENCY} фиксировать как RUB.

Админ-форма: на странице настройки персоны убрать возможность «очищать» поле ниже пустой строки, но оставить сохранение.

README: дописать раздел «Default persona fallback» с описанием плейсхолдеров и фиксированной валюты RUB.

B. Убрать кнопку «сделать основным» в админке ключей

Шаблон админки ключей: app/templates/admin/keys.html.
— Удалить/скрыть кнопку «Сделать основным» и связанные элементы UI.

Бэкенд-маршрут: app/web/admin.py (раздел управления ключами).
— Удалить/задепрекейтить обработчик действия «make_primary». Если маршрут уже есть, вернуть 410/404 и убрать его из меню/ссылок.

UX-правило: при создании ключа в обработчике «создать ключ» оставить текущую бизнес-логику; UI не должен предлагать повторное «назначение основным».

Тесты: обновить тест админки ключей (если есть), удалив ассерт наличия кнопки.

C. Паспорт бренда: упростить поля

Модель/схема: найти модель паспорта бренда (app/models/tenant.py или аналог; либо pydantic-схема/DAO).
— Удалить поля «тон», «CTA», «валюта».
— Убедиться, что при сериализации валюта не требуется и по умолчанию считается RUB на уровне приложения.

Админ-шаблон: app/templates/admin/passport.html.
— Удалить инпуты «тон», «CTA», «валюта». Оставить только: «Имя бренда», «Имя менеджера», «Город».

Бэкенд-обработчик формы: app/web/admin.py (раздел сохранения паспорта бренда).
— Перестать читать/валидировать удалённые поля.

Миграций БД: не требуется, если эти поля не лежат в таблицах. Если лежат — добавить Alembic-миграцию на drop/ignore колонок и обновить CRUD.

Документация: обновить README.md раздел «Паспорт бренда»: перечислить только три поля и валюту по умолчанию RUB.

D. Белый текст на белом фоне в инпутах

Глобальные стили админки: app/static/admin.css (если нет — app/templates/_base.html в <style> или общий CSS каталога app/static).
— Явно задать для input, select, textarea, .form-control цвет текста тёмный и фон белый; placeholder — серый; border — контрастный.

Переопределения UI-библиотеки: если используется Tailwind/другая тема, добавить utility-классы/override для форменных элементов в базовый шаблон формы.

Проверка контраста: пройтись по всем страницам админки, где есть инпуты (ключи, паспорт бренда, интеграции) и убедиться, что у элементов нет наследования белого цвета текста.

Тест-план после правок

Создать нового арендатора → не заполнять персону → убедиться, что подставился дефолт из presets.py.

Админка ключей: нет кнопки «сделать основным»; создание ключа работает как раньше.

Паспорт бренда: видны только 3 поля. Сохранение/чтение работают.

Визуал форм: текст чёрный, placeholder серый, фон инпутов белый на всех страницах.

Публичные маршруты /pub/tg/*, /pub/wa/* продолжают требовать ?k= и работать с PUBLIC_KEY. 
GitHub

Обновить документацию (README.md)

Добавить раздел «Default persona» с плейсхолдерами и примером подстановки, указать валюту = RUB.

Упростить «Паспорт бренда» до трёх полей.

В разделе «PUBLIC_KEY для фронта» оставить текущие примеры curl, подтвердить, что админка не имеет кнопки «сделать основным». 
GitHub

Короткие определения

Переменная окружения — имя=значение, которое читает приложение при старте (пример: PUBLIC_KEY, OUTBOX_ENABLED). 
GitHub

Эндпоинт — адрес HTTP-маршрута API (пример: /pub/tg/status). 
GitHub

OUTBOX_ENABLED — флаг, разрешающий отправку исходящих сообщений; выключен — воркер только логирует"""
